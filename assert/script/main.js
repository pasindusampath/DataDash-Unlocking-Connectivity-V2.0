class Main{mobile;constructor(){$("#getOtp").click(this.getOtp.bind(this)),$("#submitOtp").click(this.submitOtp.bind(this)),$("#getData").click(this.getData.bind(this))}getOtp(){$("#getOtp").prop("disabled",!0);let e=$("#mobileNo").val();if(!this.validateMobile()){alert("Wrong Number Enter Correct Number"),$("#getOtp").prop("disabled",!1);return}this.mobile=e,this.request(e)}submitOtp(){let e=$("#password").val();this.validatePassword()||alert("Check Again"),this.subOtp(e)}validatePassword(){return/^\d{5}$/.test($("#password").val())}validateMobile(){let e=$("#mobileNo").val();return/^(?:0|94|\+94|0094)?(?:78|72\d)\d{6}$/.test(e)}subOtp(e){var t={url:"https://oneapp.hutch.lk/hutch_2_0/index.php?r=scapp/connection/registerConfirmPin",method:"POST",timeout:0,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:"appType=android&appVersion=3.0.8&deviceModel=SM-G988N&deviceRef=ad13e41df99ff787&deviceVersion=7.1.2&platformName=android&platformVersion=7.1.2&deviceToken=&operator=&lob=&conn="+this.mobile+"&primaryConn="+this.mobile+"&prePostType=&language=en&pushId=fd4CkQQrTKSOC0Rh5rps-A%3AAPA91bEBRjwH9Vnhdjn62B44ZBk5KkeDyka90-MrhUxOMzeKyRvB4qfrAK7AazxJYzxb94qxFBKbFQRZ0J_blI9o1H0bZP11hDAIM1M8UELtN7SulyZ_-WiD7abGnK3glAt1EeVxsN_g&provider=gms&cosMerge=&pin="+e+"&promoCode="};$.ajax(t).done(function(e){console.log(e),!0===JSON.parse(e).success&&console.log("OK"),console.log(JSON.parse(e).data.deviceToken),localStorage.setItem("key",JSON.parse(e).data.deviceToken),$(".mainSection").removeClass("view"),$("#getDataSection").addClass("view2")})}request(e){$.ajax({url:"https://oneapp.hutch.lk/hutch_2_0/index.php?r=scapp/connection/registerPinSend",method:"POST",timeout:0,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:"appType=android&appVersion=3.0.8&deviceModel=SM-G988N&deviceRef=ad13e41df99ff787&deviceVersion=7.1.2&platformName=android&platformVersion=7.1.2&deviceToken=&operator=&lob=&conn="+e+"&primaryConn="+e+"&prePostType=&language=en&pushId=fd4CkQQrTKSOC0Rh5rps-A%3AAPA91bEBRjwH9Vnhdjn62B44ZBk5KkeDyka90-MrhUxOMzeKyRvB4qfrAK7AazxJYzxb94qxFBKbFQRZ0J_blI9o1H0bZP11hDAIM1M8UELtN7SulyZ_-WiD7abGnK3glAt1EeVxsN_g&provider=gms&cosMerge=&promoCode="}).done(function(e){let t=JSON.parse(e);console.log(t.success),!0===t.success&&($(".mainSection").removeClass("view"),$("#confirmOtp").addClass("view"))}).fail((e,t,a)=>{$("#getOtp").prop("disabled",!1)})}getData(){setTimeout(function(){$("#getData").prop("disabled",!1)},3e4);let e="appType=android&appVersion=3.0.8&deviceModel=SM-G988N&deviceRef=ad13e41df99ff787&deviceVersion=7.1.2&platformName=android&platformVersion=7.1.2&deviceToken="+localStorage.getItem("key")+"&operator=HUTCH&lob=mobile&conn="+this.mobile.slice(1)+"&primaryConn="+this.mobile.slice(1)+"&prePostType=pre&language=en&pushId=fd4CkQQrTKSOC0Rh5rps-A%3AAPA91bEBRjwH9Vnhdjn62B44ZBk5KkeDyka90-MrhUxOMzeKyRvB4qfrAK7AazxJYzxb94qxFBKbFQRZ0J_blI9o1H0bZP11hDAIM1M8UELtN7SulyZ_-WiD7abGnK3glAt1EeVxsN_g&provider=gms&cosMerge=ID&id=3580&category=Selfcare&offerType=stv&price=0.0&name=25MB%20Data";var t={url:"https://oneapp.hutch.lk/hutch_2_0/index.php?r=scapp/flyTextOffers/activateLoyaltyOffers",method:"POST",timeout:0,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8","Content-Length":e.length,Host:"oneapp.hutch.lk"},data:e};$.ajax(t).done(function(e){console.log(e)})}}new Main;